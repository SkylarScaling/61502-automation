apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: "{{ EXTERNAL_SECRET_NAME }}"
spec:
  refreshInterval: 1m
  secretStoreRef:
    name: "{{ SECRET_STORE_NAME }}" # my-secret-store       # The secret store name we have just created.
    kind: SecretStore
  target:
    name: "{{ ESO_SECRET_BUCKET }}" # my-kubernetes-secret  # Secret name in k8s
  data:
  - secretKey: "{{ KEY1 }}" # $KEY1 username   # AWS key to be stored
    remoteRef:
      key: "{{ ESO_SECRET_BUCKET }}" # ${ESO_SECRET_BUCKET} # Our AWS secret-name goes here
      property: "{{ KEY1 }}" # $KEY1 username  # The desired property in the AWS secret
  - secretKey: "{{ KEY2 }}" # $KEY2 password   # AWS key to be stored
    remoteRef:
      key: "{{ ESO_SECRET_BUCKET }}" # ${ESO_SECRET_BUCKET} # Our AWS secret-name goes here
      property: "{{ KEY2 }}" # $KEY2 password  # The desired property in the AWS secret 
