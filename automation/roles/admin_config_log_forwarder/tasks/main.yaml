---
- name: Configure OpenShift Logging CR
  k8s:
    host: "https://api.{{ cluster_address }}:6443"
    validate_certs: no
    state: "{{ state }}"
    definition:
      apiVersion: v1
      kind: ClusterLogging
      metadata:
        name: instance 
        namespace: openshift-logging 
      spec:
        collection:
          type: vector
          vector: {}
        managementState: Managed

- name: Configure OpenShift Log Forwarding Service Account
  k8s:
    host: "https://api.{{ cluster_address }}:6443"
    validate_certs: no
    state: "{{ state }}"
    definition:
      apiVersion: v1
      kind: ServiceAccount
      metadata:
        name: cluster-logging-operator
        namespace: openshift-logging
  
- name: Configure OpenShift Log Fowarding CR
  apiVersion: logging.openshift.io/v1
  kind: ClusterLogForwarder
  metadata:
    name: <log_forwarder_name> 
    namespace: <log_forwarder_namespace> 
  spec:
    serviceAccountName: <service_account_name> 
    pipelines:
    - inputRefs:
      - <log_type> 
      outputRefs:
      - <output_name> 
    outputs:
    - name: <output_name> 
      type: <output_type> 
      url: <log_output_url>

